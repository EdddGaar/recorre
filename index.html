<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recorre | Cumplea√±os de la Semana</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;800;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <!-- AOS -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

  <style>
    :root{
      /* Pastel rosa/azul */
      --pink:#ffd1dc;
      --pink2:#ffc8dd;
      --blue:#bae1ff;
      --blue2:#cfe9ff;
      --mint:#c7f9cc;
      --lav:#e6d2ff;

      --ink:#0f1430;
      --ink2:#12183a;

      --text:#ffffff;
      --muted:#e7edff;
    }

    *{box-sizing:border-box}
    body{
      margin:0; font-family: Inter, system-ui, sans-serif; color:var(--text);
      overflow-x:hidden;

      /* Fondo pastel: rosa/azul con brillo y animaci√≥n suave */
      background:
        radial-gradient(1000px 700px at 15% -10%, rgba(255,209,220,.42), transparent 60%),
        radial-gradient(1100px 800px at 85% 0%, rgba(186,225,255,.42), transparent 60%),
        linear-gradient(180deg, #202a55 0%, #192245 40%, #141b37 100%);
      background-attachment: fixed,fixed,fixed;
      background-blend-mode: screen, screen, normal;
      animation: hue 18s linear infinite, floatBg 22s ease-in-out infinite alternate;
    }
    @keyframes hue{from{filter:hue-rotate(0)}to{filter:hue-rotate(8deg)}}
    @keyframes floatBg{
      from{background-position: left top, right top, center}
      to{  background-position: left 8% top -4%, right -6% top, center}
    }

    #particles-bg{position:fixed; inset:0; z-index:-1}

    header{
      text-align:center; padding:32px 18px 10px;
    }
    .logo{
      width:140px; height:140px; border-radius:50%; object-fit:cover;
      border:2px solid rgba(255,255,255,.7);
      box-shadow:0 0 50px rgba(255,209,220,.55), 0 0 90px rgba(186,225,255,.45);
      margin-bottom:12px;
      background:linear-gradient(145deg, rgba(255,255,255,.18), rgba(255,255,255,.05));
    }
    .brand{font-family:Outfit; font-weight:900; font-size:clamp(28px,4.4vw,52px);
      background:linear-gradient(90deg,var(--pink),var(--blue),var(--lav));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 2px 8px rgba(0,0,0,.35);
    }

    /* Columna vertical */
    main{max-width:860px; margin:0 auto 80px; padding:0 18px}
    .phrase{
      text-align:center; margin:10px auto 24px; max-width:820px;
      font-size:clamp(16px,2.4vw,20px); color:var(--muted);
      background:linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.22);
      border-radius:16px; padding:12px 16px; backdrop-filter: blur(10px);
    }

    .section{
      display:block; margin:24px auto; padding:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      border:1px solid rgba(255,255,255,.24);
      border-radius:22px; backdrop-filter: blur(14px);
      box-shadow:0 10px 36px rgba(0,0,0,.35);
    }
    .title-day{
      text-align:center;
      font-family:Outfit; font-weight:900; letter-spacing:.5px;
      margin:0 0 14px;
      /* HOY bien grande */
      font-size:clamp(28px,6.5vw,64px);
      line-height:1.05;
      text-shadow:0 2px 0 rgba(0,0,0,.28), 0 10px 30px rgba(0,0,0,.35);
    }
    .title-day.small{ font-size:clamp(22px,4.6vw,40px) }

    .cards{
      display:grid; grid-template-columns:1fr; gap:14px; max-width:720px; margin:0 auto;
    }
    .card{
      position:relative; text-align:center; padding:18px 16px; border-radius:18px;
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.28); box-shadow:0 6px 28px rgba(0,0,0,.28);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover{ transform: translateY(-2px); box-shadow:0 12px 36px rgba(0,0,0,.34) }
    .card::before{content:"üéÇ"; position:absolute; left:10px; top:10px; font-size:18px}
    .name{font-family:Outfit; font-weight:900; font-size:clamp(18px,3.5vw,24px); margin:0 0 6px}
    .meta{font-size:14px; opacity:.9; margin:0 0 8px}
    .wish{font-size:15px; color:var(--muted); margin:0}

    footer{text-align:center; padding:26px 16px; color:var(--muted)}

    /* Confeti */
    .confetti{
      position:fixed; top:-10px; width:8px; height:14px; z-index:5; opacity:.98;
      border-radius:2px; pointer-events:none; animation:fall linear forwards;
      will-change: transform, opacity;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
      mix-blend-mode: screen;
    }
    @keyframes fall{to{ transform:translateY(110vh) rotate(540deg); opacity:1 }}

    /* Accesibilidad */
    @media (prefers-reduced-motion: reduce){
      .confetti{animation-duration:0s !important}
      *{animation:none !important; transition:none !important}
    }
  </style>
</head>
<body>
  <div id="particles-bg"></div>

  <header>
    <img class="logo" src="https://github.com/EdddGaar/recorre/raw/main/Re%20corre%20Logo.jpg" alt="Logo Recorre" />
    <div class="brand">Recorre</div>
  </header>

  <main>
    <!-- Frase √∫nica dirigida a l@s cumplea√±er@s -->
    <p class="phrase" id="global-phrase">Que este nuevo a√±o te traiga kil√≥metros, salud y muchas metas logradas. ¬°Te celebra la familia Recorre! üéΩ‚ú®</p>

    <!-- Contenedor vertical (HOY, Ma√±ana, resto) -->
    <div id="vertical"></div>
  </main>

  <footer>#RecorreToluca üéΩüî•üåÑ ¬∑ Creado de Runners para Runners ‚ù§Ô∏è</footer>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // ========= DATOS (ejemplo) =========
    // Formato MM-DD (lo conectaremos a Google Sheet despu√©s)
    const BIRTHDAYS = [
      { name: "Fernanda S√°nchez",  date: "08-17", pace:"5:15/km" },
      { name: "Luis Hern√°ndez",    date: "08-17", pace:"5:00/km" },
      { name: "Ana G√≥mez",         date: "08-18", pace:"6:05/km" },
      { name: "Jorge P√©rez",       date: "08-20", pace:"4:55/km" },
      { name: "Mar√≠a L√≥pez",       date: "08-21", pace:"5:40/km" },
      { name: "Carlos Ram√≠rez",    date: "08-22", pace:"5:20/km" },
      { name: "Paola Ortega",      date: "08-23", pace:"5:50/km" },
    ];
    const WISH = "Que este nuevo a√±o te traiga kil√≥metros, salud y muchas metas logradas. ¬°Te celebra la familia Recorre! üéΩ‚ú®";

    // ========= UTILIDADES FECHA =========
    const dayNames = ['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'];

    function at0(d){ const x=new Date(d); x.setHours(0,0,0,0); return x; }
    function mondayOfWeek(d){
      const x=at0(d); const w=x.getDay(); const diff=(w===0?-6:1-w); x.setDate(x.getDate()+diff); return x;
    }
    function sundayOfWeek(d){ const m=mondayOfWeek(d); const s=new Date(m); s.setDate(m.getDate()+6); return s; }
    function parseMD(md, year){ const [m, d]=md.split('-').map(Number); const dt=new Date(year, m-1, d); return dt; }
    function isSameDay(a,b){ return at0(a).getTime()===at0(b).getTime(); }

    function groupByWeek(list){
      const today = new Date();
      const start = mondayOfWeek(today), end = sundayOfWeek(today);

      // Semillas en orden (Lun->Dom) pero mostramos HOY grande y Ma√±ana debajo
      const days = [];
      for(let i=0;i<7;i++){ const d=new Date(start); d.setDate(start.getDate()+i); days.push(d); }

      // Agrupar ocurrencias de cumplea√±os que caen esta semana (del a√±o actual)
      const year = today.getFullYear();
      const map = new Map(days.map(d=>[at0(d).getTime(), []]));

      for(const p of list){
        const dt = parseMD(p.date, year);
        if(at0(dt) >= at0(start) && at0(dt) <= at0(end)){
          map.get(at0(dt).getTime()).push(p);
        }
      }

      // Reordenamos salida: HOY, Ma√±ana, luego resto de la semana
      const out = [];
      const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);

      for(const d of days){
        const label = isSameDay(d,today) ? 'HOY' : isSameDay(d,tomorrow) ? 'Ma√±ana' : dayNames[d.getDay()];
        out.push({ label, date:d, items: map.get(at0(d).getTime())||[] });
      }

      // Orden: HOY primero, MA√ëANA segundo, luego el resto manteniendo el orden de la semana
      out.sort((a,b)=>{
        const rank = v => v.label==='HOY' ? 0 : v.label==='Ma√±ana' ? 1 : 2;
        return rank(a)-rank(b) || a.date-b.date;
      });

      return out;
    }

    // ========= RENDER =========
    function render(){
      const container = document.getElementById('vertical');
      container.innerHTML = '';

      const blocks = groupByWeek(BIRTHDAYS);
      blocks.forEach((g, idx)=>{
        const section = document.createElement('section');
        section.className = 'section';
        section.setAttribute('data-aos', 'fade-up');
        if(idx>0) section.setAttribute('data-aos-delay', String(80*idx));

        const h = document.createElement('h2');
        h.className = 'title-day' + (g.label==='HOY' ? '' : ' small');
        h.textContent = g.label;
        section.appendChild(h);

        const cards = document.createElement('div');
        cards.className = 'cards';

        if(!g.items.length){
          const empty = document.createElement('div');
          empty.className = 'card';
          const p = document.createElement('p'); p.className = 'wish'; p.textContent = '‚Äî Sin cumplea√±er@s ‚Äî';
          empty.appendChild(p); cards.appendChild(empty);
        }else{
          g.items.sort((a,b)=> a.name.localeCompare(b.name)).forEach(p=>{
            const c = document.createElement('div'); c.className='card';
            const n = document.createElement('p'); n.className='name'; n.textContent=p.name;
            const m = document.createElement('p'); m.className='meta';
            m.textContent = `${g.date.toLocaleDateString('es-MX', { day:'2-digit', month:'short' }).replace('.','')} ¬∑ ${p.pace||'Runner'}`;
            const w = document.createElement('p'); w.className='wish'; w.textContent=WISH;
            c.appendChild(n); c.appendChild(m); c.appendChild(w); cards.appendChild(c);
          });
        }

        section.appendChild(cards);
        container.appendChild(section);
      });
    }

    // ========= EFECTOS =========
    AOS.init({ once:true });

    // Part√≠culas pastel
    particlesJS('particles-bg', {
      particles: {
        number:{value:80},
        color:{value:['#ffd1dc','#ffc8dd','#bae1ff','#cfe9ff','#c7f9cc','#e6d2ff']},
        opacity:{ value:0.7, random:true },
        size:{value:3, random:true},
        move:{enable:true,speed:1.1,random:true}
      },
      interactivity:{ events:{ onhover:{enable:true,mode:'repulse'} } },
      retina_detect: true
    });

    // Confeti √∫nico
    const CONFETTI_COLORS = ['#ffd1dc','#ffc8dd','#bae1ff','#cfe9ff','#c7f9cc','#e6d2ff'];
    const CONFETTI_SHAPES = ['rect','circle','tilt'];

    function confettiBurst(n=180, dur=[2.1,3.3]){
      for(let i=0;i<n;i++){
        const el = document.createElement('span');
        el.className = 'confetti';
        el.style.left = (Math.random()*100)+'vw';
        el.style.background = CONFETTI_COLORS[(Math.random()*CONFETTI_COLORS.length)|0];

        const shape = CONFETTI_SHAPES[(Math.random()*CONFETTI_SHAPES.length)|0];
        if(shape==='circle'){
          const d = 6 + Math.random()*6; el.style.width=d+'px'; el.style.height=d+'px'; el.style.borderRadius='50%';
        }else if(shape==='tilt'){
          const w = 8 + Math.random()*8, h = 10 + Math.random()*10;
          el.style.width=w+'px'; el.style.height=h+'px';
          el.style.transform=`rotate(${Math.random()*360}deg) skew(${10+Math.random()*20}deg)`;
        }else{
          el.style.width=(6+Math.random()*6)+'px'; el.style.height=(10+Math.random()*10)+'px'; el.style.borderRadius='2px';
        }

        const t = dur[0] + Math.random()*(dur[1]-dur[0]);
        el.style.animationDuration = t+'s';
        document.body.appendChild(el);
        setTimeout(()=>el.remove(), t*1000 + 1200);
      }
    }
    function startConfettiLoop(){
      confettiBurst(240, [1.9, 3.0]);                 // r√°faga inicial
      setInterval(()=>confettiBurst(150, [2.1, 3.2]), 3200); // repetici√≥n
    }

    // ========= INIT =========
    render();
    startConfettiLoop();
  </script>
</body>
</html>
