<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Re-corre | Cumplea√±os de la Semana</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;800;900&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Favicon -->
  <link rel="icon" href="https://github.com/EdddGaar/recorre/raw/main/Re%20corre%20Logo.jpg">

  <style>
    :root{
      --text:#ffffff; --muted:#eef1ff;
      --p1:#6faeff; --p2:#5977ff; --p3:#7a61ff; --p4:#b4a8ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; font-family: Inter, system-ui, sans-serif; color:var(--text); overflow-x:hidden; background:#1a2040; }

    /* ===== Fondo: carrusel de wallpapers ===== */
    .wallpapers{ position:fixed; inset:0; z-index:-5; overflow:hidden; background:#000; }
    .wallpapers img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transition:opacity 1s ease-in-out; }
    .wallpapers img.show{ opacity:1; }

    /* Fondo degradado animado */
    .gradient{
      position:fixed; inset:0; z-index:-4;
      background:
        radial-gradient(110% 110% at 10% 10%, color-mix(in oklab, var(--p1) 90%, white 6%), transparent 60%),
        radial-gradient(110% 110% at 90% 15%, color-mix(in oklab, var(--p2) 90%, white 6%), transparent 60%),
        radial-gradient(110% 110% at 50% 90%, color-mix(in oklab, var(--p3) 90%, white 6%), transparent 60%),
        linear-gradient(135deg, var(--p1) 0%, var(--p2) 45%, var(--p3) 80%);
      background-size: 140% 140%;
      animation: gradientShift 14s ease-in-out infinite alternate;
      filter: saturate(1.12) contrast(1.05);
      opacity:.78;
    }
    @keyframes gradientShift{ 0%{background-position:0% 50%} 100%{background-position:100% 50%} }

    /* Banderines */
    .banners{ position:fixed; inset:0 0 auto 0; height:120px; z-index:-3; pointer-events:none }
    .banner-wrap{ width:100%; height:100% }

    /* Estrellas */
    #stars{ position:fixed; inset:0; z-index:-2; pointer-events:none; mix-blend-mode:screen; opacity:.9 }

    /* Confeti */
    .confetti{
      position:fixed; top:-10px; width:8px; height:14px; z-index:5; opacity:.98;
      border-radius:2px; pointer-events:none; animation:fall linear forwards;
      will-change: transform, opacity; filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
      mix-blend-mode: screen;
    }
    @keyframes fall{ to{ transform:translateY(110vh) rotate(520deg); opacity:1 } }

    header{ text-align:center; padding:28px 18px 8px }
    .logo{
      width:120px; height:120px; border-radius:50%; object-fit:cover;
      border:2px solid rgba(255,255,255,.85); box-shadow:0 0 40px rgba(0,0,0,.35); margin-bottom:12px
    }
    .brand{ font-family:Outfit; font-weight:900; font-size:clamp(28px,4.4vw,52px); color:#fff; text-shadow:0 3px 12px rgba(0,0,0,.45) }

    main{ max-width:980px; margin:0 auto 86px; padding:0 18px }
    .phrase{
      text-align:center; margin:10px auto 18px; max-width:880px; font-size:clamp(16px,2.4vw,20px);
      color:#fff; background:rgba(0,0,0,.20); border:1px solid rgba(255,255,255,.25);
      border-radius:16px; padding:12px 16px; backdrop-filter: blur(6px)
    }

    .toolbar{ display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap; margin:6px 0 14px }
    .btn{
      appearance:none; border:none; border-radius:999px; padding:10px 16px; cursor:pointer; color:#1a2040; font-weight:800;
      background:linear-gradient(180deg,#fff,#f2f5ff); box-shadow:0 8px 24px rgba(0,0,0,.25), inset 0 1px 0 #fff; transition:.15s; font-family:Inter
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 12px 30px rgba(0,0,0,.32), inset 0 1px 0 #fff }
    .btn-ghost{ background:linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,.10)); color:#fff; border:1px solid rgba(255,255,255,.28) }

    .section{ margin:22px auto; padding:16px; background:rgba(255,255,255,.16); border:1px solid rgba(255,255,255,.26);
      border-radius:22px; backdrop-filter: blur(14px); box-shadow:0 10px 36px rgba(0,0,0,.35) }
    .title-day{ text-align:center; font-family:Outfit; font-weight:900; margin:0 0 14px; font-size:clamp(28px,6.5vw,64px); line-height:1.05; text-shadow:0 3px 10px rgba(0,0,0,.4) }
    .title-day.small{ font-size:clamp(22px,4.6vw,40px) }

    .cards{ display:grid; grid-template-columns:1fr; gap:14px; max-width:760px; margin:0 auto; justify-items:center }
    @media (min-width:720px){ .cards{ grid-template-columns:repeat(2,1fr) } }

    /* Tarjetas normales */
    .card{
      position:relative; text-align:center; padding:18px 16px; border-radius:18px;
      background:linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,.10));
      box-shadow:0 6px 28px rgba(0,0,0,.30); transition:transform .18s ease, box-shadow .18s ease; overflow:hidden
    }
    .card:hover{ transform: translateY(-2px); box-shadow:0 12px 36px rgba(0,0,0,.40) }
    .card::before{ content:none; }
    .badge{ position:absolute; right:10px; top:10px; font-size:12px; padding:.2rem .5rem; border-radius:999px; background:#fff; color:#333; font-weight:900; z-index:4 }
    .name{font-family:Outfit; font-weight:900; font-size:clamp(18px,3.5vw,24px); margin:0 0 6px; color:#1a2040}
    .meta{font-size:14px; opacity:.95; margin:0 0 8px; color:#344}
    .wish{font-size:15px; color:#1d1d1d; margin:0}
    .card .bg{ position:absolute; top:5px; left:5px; right:5px; bottom:5px; z-index:1; background:rgba(255,255,255,.95); border-radius:14px; backdrop-filter:blur(24px); outline:2px solid #fff2; overflow:hidden }
    .card .blob{ position:absolute; z-index:0; top:50%; left:50%; width:220px; height:220px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #ff7aa2, #7a61ff 60%, #00d1ff 100%); opacity:.9; filter:blur(14px); animation:blob-bounce 5s infinite ease }
    .card .content{ position:relative; z-index:3 }
    @keyframes blob-bounce {
      0%{ transform: translate(-100%, -100%) translate3d(0,0,0) }
      25%{ transform: translate(-100%, -100%) translate3d(100%,0,0) }
      50%{ transform: translate(-100%, -100%) translate3d(100%,100%,0) }
      75%{ transform: translate(-100%, -100%) translate3d(0,100%,0) }
      100%{ transform: translate(-100%, -100%) translate3d(0,0,0) }
    }

    /* Recuadro vac√≠o centrado con degradado */
    .empty-card{
      width:min(520px, 92%);
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:32px 20px;
      border-radius:22px;
      background:linear-gradient(160deg, rgba(255,255,255,.25), rgba(255,255,255,.12));
      border:2px dashed rgba(255,255,255,.5);
      box-shadow:0 8px 28px rgba(0,0,0,.35);
    }
    .empty-card .wish{
      font-size:clamp(18px,2.4vw,24px);
      font-weight:700;
      background: linear-gradient(90deg,#ff7aa2,#7a61ff,#00d1ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align:center;
      margin:0;
    }

    footer{text-align:center; padding:24px 16px; color:#fff}

    @media (prefers-reduced-motion: reduce){
      .gradient{animation:none} .confetti{animation-duration:0s !important} *{transition:none !important}
      .blob{animation:none!important}
    }
  </style>
</head>
<body>
  <!-- Carrusel de wallpapers -->
  <div class="wallpapers" aria-hidden="true"></div>

  <div class="gradient" aria-hidden="true"></div>

  <!-- Banderines -->
  <div class="banners" aria-hidden="true">
    <svg class="banner-wrap" viewBox="0 0 1200 200" preserveAspectRatio="none">
      <path d="M0,60 C300,120 900,0 1200,80" fill="none" stroke="rgba(255,255,255,.7)" stroke-width="4" />
      <defs>
        <linearGradient id="flag1" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#FFD166"/><stop offset="100%" stop-color="#FF9F1C"/></linearGradient>
        <linearGradient id="flag2" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#06D6A0"/><stop offset="100%" stop-color="#118AB2"/></linearGradient>
        <linearGradient id="flag3" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#A0C4FF"/><stop offset="100%" stop-color="#7B8CFF"/></linearGradient>
      </defs>
      <g>
        <polygon points="40,60 80,60 60,120" fill="url(#flag1)"/>
        <polygon points="110,60 150,60 130,120" fill="url(#flag2)"/>
        <polygon points="180,60 220,60 200,120" fill="url(#flag3)"/>
        <polygon points="250,60 290,60 270,120" fill="url(#flag1)"/>
        <polygon points="320,60 360,60 340,120" fill="url(#flag2)"/>
        <polygon points="390,60 430,60 410,120" fill="url(#flag3)"/>
        <polygon points="460,60 500,60 480,120" fill="url(#flag1)"/>
        <polygon points="530,60 570,60 550,120" fill="url(#flag2)"/>
        <polygon points="600,60 640,60 620,120" fill="url(#flag3)"/>
        <polygon points="670,60 710,60 690,120" fill="url(#flag1)"/>
        <polygon points="740,60 780,60 760,120" fill="url(#flag2)"/>
        <polygon points="810,60 850,60 830,120" fill="url(#flag3)"/>
        <polygon points="880,60 920,60 900,120" fill="url(#flag1)"/>
        <polygon points="950,60 990,60 970,120" fill="url(#flag2)"/>
        <polygon points="1020,60 1060,60 1040,120" fill="url(#flag3)"/>
        <polygon points="1090,60 1130,60 1110,120" fill="url(#flag1)"/>
      </g>
    </svg>
  </div>

  <!-- Estrellas -->
  <canvas id="stars"></canvas>

  <header>
    <img class="logo" src="https://github.com/EdddGaar/recorre/raw/main/Re%20corre%20Logo.jpg" alt="Logo Re-corre" />
    <div class="brand">Re-corre</div>
  </header>

  <main>
    <p class="phrase" id="status">Cargando cumplea√±er@s‚Ä¶</p>

    <div class="toolbar">
      <button class="btn" id="btn-celebrar">Celebrar</button>
      <button class="btn btn-ghost" id="btn-hoy">Ir a HOY</button>
      <button class="btn btn-ghost" id="btn-reload">Recargar</button>
    </div>

    <div id="vertical"></div>
  </main>

  <footer>üèÉ‚Äç‚ôÄÔ∏è #Re-corre Toluca ¬∑ Creado de Runners para Runners üéÇüéàüéä ¬∑ <span id="week-range"></span></footer>


  <!-- PapaParse -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <script>
    /* ===== Estrellas ===== */
    (function stars(){
      const c = document.getElementById('stars');
      const ctx = c.getContext('2d');
      let W, H, stars = [];
      function resize(){ W = c.width = innerWidth; H = c.height = innerHeight; spawn(); }
      function spawn(){
        const count = Math.min(180, Math.floor(W*H/9000));
        stars = new Array(count).fill(0).map(()=>({
          x: Math.random()*W,
          y: Math.random()*H*0.7 + 10,
          r: Math.random()*1.8 + 0.6,
          a: Math.random()*0.5 + 0.4,
          speed: Math.random()*0.003 + 0.0015,
          phase: Math.random()*Math.PI*2
        }));
      }
      function tick(){
        ctx.clearRect(0,0,W,H);
        for(const s of stars){
          s.phase += s.speed;
          const alpha = s.a * (0.5 + 0.5*Math.sin(s.phase));
          const grad = ctx.createRadialGradient(s.x,s.y,0, s.x,s.y,s.r*3);
          grad.addColorStop(0, `rgba(255,255,255,${alpha})`);
          grad.addColorStop(1, `rgba(255,255,255,0)`);
          ctx.fillStyle = grad; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();
        }
        requestAnimationFrame(tick);
      }
      addEventListener('resize', resize); resize(); requestAnimationFrame(tick);
    })();

    /* ===== Fecha utils ===== */
    const dayNames = ['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'];
    const fmtDM = (d)=> d.toLocaleDateString('es-MX',{day:'2-digit',month:'short'}).replace('.', '');
    const at0=d=>{ const x=new Date(d); x.setHours(0,0,0,0); return x };
    function mondayOfWeek(d){ const x=at0(d); const w=x.getDay(); const diff=(w===0?-6:1-w); x.setDate(x.getDate()+diff); return x }
    function sundayOfWeek(d){ const m=mondayOfWeek(d); const s=new Date(m); s.setDate(m.getDate()+6); return s }
    const isSameDay=(a,b)=> at0(a).getTime()===at0(b).getTime();

    /* ===== Confeti ===== */
    const CONFETTI_COLORS = ['#6faeff','#5977ff','#7a61ff','#00d1ff','#14e0a1','#ffe066','#ffffff'];
    const CONFETTI_SHAPES = ['rect','circle','tilt'];
    function confettiBurst(n=240, dur=[1.8, 3.0]){
      for(let i=0;i<n;i++){
        const el = document.createElement('span'); el.className = 'confetti';
        el.style.left = (Math.random()*100)+'vw';
        el.style.background = CONFETTI_COLORS[(Math.random()*CONFETTI_COLORS.length)|0];
        const shape = CONFETTI_SHAPES[(Math.random()*CONFETTI_SHAPES.length)|0];
        if(shape==='circle'){ const d=5+Math.random()*7; el.style.width=d+'px'; el.style.height=d+'px'; el.style.borderRadius='50%'; }
        else if(shape==='tilt'){ const w=7+Math.random()*9, h=9+Math.random()*11; el.style.width=w+'px'; el.style.height=h+'px'; el.style.transform=`rotate(${Math.random()*360}deg) skew(${10+Math.random()*20}deg)`; }
        else{ el.style.width=(6+Math.random()*6)+'px'; el.style.height=(10+Math.random()*10)+'px'; el.style.borderRadius='2px'; }
        const t = dur[0] + Math.random()*(dur[1]-dur[0]); el.style.animationDuration = t+'s';
        document.body.appendChild(el); setTimeout(()=>el.remove(), t*1000 + 1200);
      }
    }

    /* ===== Botones ===== */
    document.getElementById('btn-celebrar').addEventListener('click', ()=> confettiBurst());
    document.getElementById('btn-hoy').addEventListener('click', ()=>{
      const hoy=[...document.querySelectorAll('.title-day')].find(n=> n.textContent.trim()==='HOY');
      if(hoy) hoy.scrollIntoView({behavior:'smooth',block:'start'});
    });
    document.getElementById('btn-reload').addEventListener('click', ()=> boot(true));

    /* ===== Fuente de datos: Google Sheets publicado como CSV ===== */
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTN-lWu2WBwCmFHqb8aI6ObDNvuGYjSoHdNE62eP4Gp7PXhgsOBRvN3h7uXRQWQNTcD7mttS5mjEouW/pub?output=csv";

    const normalize = s => (s ?? '').toString().trim();
    const stripAccentsLower = s => normalize(s).normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase();

    function findHeaderIndex(headers, candidates){
      const cleaned = headers.map(h => stripAccentsLower(h));
      for(const cand of candidates){
        for(let i=0;i<cleaned.length;i++){
          if(cleaned[i].includes(cand)) return i;
        }
      }
      return -1;
    }

    function parseBirthdayToMD(value){
      if(!value) return null;
      const s = normalize(value);

      let m = s.match(/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/);
      if(m) return {m:parseInt(m[2],10), d:parseInt(m[3],10)};

      const parts = s.replace(/\./g,'/').replace(/-/g,'/').split('/');
      if(parts.length >= 2 && /^\d+$/.test(parts[0]) && /^\d+$/.test(parts[1])){
        const a = parseInt(parts[0],10), b = parseInt(parts[1],10);
        if(a>12 && b<=12) return {m:b, d:a};
        if(a>=1 && a<=12 && b>=1 && b<=31) return {m:a, d:b};
      }

      m = s.match(/^(\d{1,2})[\/\-](\d{1,2})$/);
      if(m) return {m:parseInt(m[1],10), d:parseInt(m[2],10)};

      return null;
    }

    function parseMD(mmdd, year){ const [m,d] = mmdd.split('-').map(Number); return new Date(year, m-1, d); }

    function groupByWeek(list){
      const today = new Date();
      const start = mondayOfWeek(today), end = sundayOfWeek(today);
      document.getElementById('week-range').textContent = `${fmtDM(start)} ‚Äì ${fmtDM(end)}`;

      const days = []; for(let i=0;i<7;i++){ const d=new Date(start); d.setDate(start.getDate()+i); days.push(d) }
      const map = new Map(days.map(d=>[at0(d).getTime(), []]));

      for(const p of list){
        const candidates = [0,-1,1].map(off => parseMD(p.date, today.getFullYear()+off));
        const hit = candidates.find(dt => at0(dt) >= at0(start) && at0(dt) <= at0(end));
        if(hit){ map.get(at0(hit).getTime()).push(p); }
      }

      const out=[]; const tomorrow=new Date(today); tomorrow.setDate(today.getDate()+1);
      for(const d of days){ const label=isSameDay(d,today)?'HOY':isSameDay(d,tomorrow)?'Ma√±ana':dayNames[d.getDay()]; out.push({label,date:d,items:map.get(at0(d).getTime())||[]}) }
      out.sort((a,b)=>{ const rank=v=>v.label==='HOY'?0:v.label==='Ma√±ana'?1:2; return rank(a)-rank(b)||a.date-b.date });
      return out;
    }

    async function fetchBirthdaysFromCSV(){
      const res = await fetch(CSV_URL + "&_cb=" + Date.now(), {cache:'no-store'});
      if(!res.ok) throw new Error("CSV fetch failed: " + res.status);
      const csvText = await res.text();

      const parsed = Papa.parse(csvText, { header:false, skipEmptyLines:true });
      const rows = parsed.data || [];
      if(rows.length === 0){ console.warn('CSV vac√≠o'); return []; }

      const headers = rows[0].map(v => normalize(v));
      const data = rows.slice(1);

      const NAME_COL = findHeaderIndex(headers, ['nombre','name']);
      const PACE_COL = findHeaderIndex(headers, ['ritmo','pace']);
      const BIRTH_COL = 3;

      if(NAME_COL === -1){
        console.warn('No se encontr√≥ la columna de NOMBRE. Encabezados:', headers);
        throw new Error('Encabezado de nombre no encontrado.');
      }
      if(BIRTH_COL >= headers.length){
        console.warn('El CSV no tiene columna D. Encabezados:', headers);
        throw new Error('No existe la columna D en el CSV.');
      }

      const out = [];
      for(const row of data){
        const name = normalize(row[NAME_COL]);
        const birthRaw = row[BIRTH_COL] != null ? String(row[BIRTH_COL]) : '';
        if(!name || !birthRaw) continue;

        const md = parseBirthdayToMD(birthRaw);
        if(!md || !(md.m>=1 && md.m<=12) || !(md.d>=1 && md.d<=31)){
          console.warn('Fecha de cumplea√±os no reconocida:', birthRaw, '‚Üí fila:', row);
          continue;
        }
        const mm = String(md.m).padStart(2,'0');
        const dd = String(md.d).padStart(2,'0');
        const pace = (PACE_COL !== -1) ? normalize(row[PACE_COL]) : '';

        out.push({ name, date:`${mm}-${dd}`, pace, wish:'' });
      }

      console.log(`CSV cargado: ${out.length} registros`, { headers, NAME_COL, BIRTH_COL, PACE_COL });
      return out;
    }

    function render(){
      const container=document.getElementById('vertical'); 
      container.innerHTML='';

      const blocks=groupByWeek(window.BIRTHDAYS || []);
      blocks.forEach((g)=>{
        const section=document.createElement('section'); section.className='section';
        const h=document.createElement('h2'); h.className='title-day'+(g.label==='HOY'?'':' small'); h.textContent=g.label; section.appendChild(h);

        const cards=document.createElement('div'); cards.className='cards';

        if(!g.items.length){
          const frasesDivertidas = [
            "Esta semana nadie envejece‚Ä¶ qu√© aburridos",
            "Silencio en la pista‚Ä¶ ni un pastel que correr esta vez",
            "¬°Plot twist! Esta semana no hay pastel, solo kil√≥metros extra",
            "Nadie cumple, pero igual puedes festejar tus agujetas nuevas",
            "Semana libre de velitas‚Ä¶ aprovecha para bajar el tiempo en 10k",
            "Los cumplea√±eros hicieron trampa y se escondieron"
          ];
          const empty=document.createElement('div'); empty.className='card empty-card';
          const bg=document.createElement('div'); bg.className='bg';
          const blob=document.createElement('div'); blob.className='blob';
          const content=document.createElement('div'); content.className='content';
          const p=document.createElement('p'); p.className='wish'; p.textContent=frasesDivertidas[Math.floor(Math.random()*frasesDivertidas.length)];
          content.appendChild(p); empty.appendChild(blob); empty.appendChild(bg); empty.appendChild(content);
          cards.appendChild(empty);
        } else {
          g.items.sort((a,b)=> a.name.localeCompare(b.name)).forEach(p=>{
  const c=document.createElement('div'); c.className='card';
  const bg=document.createElement('div'); bg.className='bg';
  const blob=document.createElement('div'); blob.className='blob';
  const content=document.createElement('div'); content.className='content';

  const n=document.createElement('p'); 
  n.className='name'; 
  n.textContent=p.name;

  const m=document.createElement('p'); 
  m.className='meta'; 
  m.textContent=`${fmtDM(g.date)} ¬∑ ${p.pace||'Runner'}`;

  const w=document.createElement('p'); 
  w.className='wish'; 
  w.textContent=p.wish || '¬°Muchas felicidades!';

  content.appendChild(n); 
  content.appendChild(m); 
  content.appendChild(w);

  c.appendChild(blob); 
  c.appendChild(bg); 
  c.appendChild(content);

  cards.appendChild(c);
});
        }

        section.appendChild(cards); container.appendChild(section);
      });

      const hasToday = blocks.some(b=> b.label==='HOY' && b.items.length);
      confettiBurst(hasToday ? 160 : 60, hasToday ? [1.6,2.6] : [1.2,1.8]);
    }

    async function boot(forceReload=false){
      const status = document.getElementById('status');
      try{
        if (forceReload) status.textContent = 'Actualizando‚Ä¶';
        window.BIRTHDAYS = await fetchBirthdaysFromCSV();
        status.textContent = (window.BIRTHDAYS && window.BIRTHDAYS.length)
          ? '¬°Feliz cumplea√±os a nuestros runners de la semana!'
          : 'No se encontraron cumplea√±er@s (revisa que haya datos en Nombre y la columna D con DD/MM/YYYY).';
        render();
      }catch(err){
        console.error(err);
        status.textContent = 'No se pudo cargar la lista de cumplea√±os. Revisa la consola (F12).';
        window.BIRTHDAYS = [];
        render();
      }
    }

    function scheduleMidnightReload(){
      const now=new Date(); const midnight=new Date(now); midnight.setHours(24,0,0,0);
      setTimeout(()=>{ boot(true); scheduleMidnightReload(); }, midnight-now);
    }

    const WALLPAPER_URLS = [
      "https://raw.githubusercontent.com/EdddGaar/recorre/9fb60180790371876c4d9b84db2b37396e653d83/cumple.jpg",
      "https://raw.githubusercontent.com/EdddGaar/recorre/9fb60180790371876c4d9b84db2b37396e653d83/wallpaper%20cumple%20morado.jpg",
      "https://raw.githubusercontent.com/EdddGaar/recorre/9fb60180790371876c4d9b84db2b37396e653d83/wallpaper%20de%20globos.jpg"
    ];

    function initWallpapers(){
      const wrap = document.querySelector('.wallpapers');
      WALLPAPER_URLS.forEach((src,i)=>{
        const img = document.createElement('img');
        img.alt = `Wallpaper ${i+1}`;
        img.decoding = "async"; img.loading = "eager"; img.src = src;
        if(i===0) img.classList.add('show');
        wrap.appendChild(img);
      });
      const imgs = [...wrap.querySelectorAll('img')];
      let idx = 0;
      setInterval(()=>{
        imgs[idx].classList.remove('show');
        idx = (idx + 1) % imgs.length;
        imgs[idx].classList.add('show');
      }, 3000);
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      initWallpapers();
      boot();
      scheduleMidnightReload();
    });
  </script>
</body>
</html>
